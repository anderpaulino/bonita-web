<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 4.0//EN"
        "http://www.tuckey.org/res/dtds/urlrewrite4.0.dtd">

<urlrewrite>
    ${proxy-portal-js}

    <rule>
        <from>^/API/bpm/activity([\?/]|$)</from>
        <to>/APIToolkit/bpm/activity$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/actor([\?/]|$)</from>
        <to>/APIToolkit/bpm/actor$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/actorMember([\?/]|$)</from>
        <to>/APIToolkit/bpm/actorMember$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/archivedActivity([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedActivity$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/archivedCase([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedCase$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/archivedComment([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedComment$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/archivedConnectorInstance([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedConnectorInstance$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/archiveddocument([\?/]|$)</from>
        <to>/APIToolkit/bpm/archiveddocument$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/archivedFlowNode([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedFlowNode$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/archivedHumanTask([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedHumanTask$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/archivedTask([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedTask$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/archivedUserTask([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedUserTask$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/case([\?/]|$)</from>
        <to>/APIToolkit/bpm/case$1</to>
    </rule>
	<rule>
        <from>^/API/bpm/caseDocument([\?/]|$)</from>
        <to>/APIToolkit/bpm/caseDocument$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/archivedCaseDocument([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedCaseDocument$1</to>
    </rule> 
    <rule>
        <from>^/API/bpm/caseVariable([\?/]|$)</from>
        <to>/APIToolkit/bpm/caseVariable$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/category([\?/]|$)</from>
        <to>/APIToolkit/bpm/category$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/comment([\?/]|$)</from>
        <to>/APIToolkit/bpm/comment$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/connectorInstance([\?/]|$)</from>
        <to>/APIToolkit/bpm/connectorInstance$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/delegation([\?/]|$)</from>
        <to>/APIToolkit/bpm/delegation$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/document([\?/]|$)</from>
        <to>/APIToolkit/bpm/document$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/flowNode([\?/]|$)</from>
        <to>/APIToolkit/bpm/flowNode$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/hiddenUserTask([\?/]|$)</from>
        <to>/APIToolkit/bpm/hiddenUserTask$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/humanTask([\?/]|$)</from>
        <to>/APIToolkit/bpm/humanTask$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/process([\?/]|$)</from>
        <to>/APIToolkit/bpm/process$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/processCategory([\?/]|$)</from>
        <to>/APIToolkit/bpm/processCategory$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/processConnector([\?/]|$)</from>
        <to>/APIToolkit/bpm/processConnector$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/processConnectorDependency([\?/]|$)</from>
        <to>/APIToolkit/bpm/processConnectorDependency$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/processParameter([\?/]|$)</from>
        <to>/APIToolkit/bpm/processParameter$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/processResolutionProblem([\?/]|$)</from>
        <to>/APIToolkit/bpm/processResolutionProblem$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/task([\?/]|$)</from>
        <to>/APIToolkit/bpm/task$1</to>
    </rule>
    <rule>
        <from>^/API/bpm/userTask([\?/]|$)</from>
        <to>/APIToolkit/bpm/userTask$1</to>
    </rule>
    <rule>
        <from>^/API/customuserinfo/definition([\?/]|$)</from>
        <to>/APIToolkit/customuserinfo/definition$1</to>
    </rule>
    <rule>
        <from>^/API/customuserinfo/user([\?/]|$)</from>
        <to>/APIToolkit/customuserinfo/user$1</to>
    </rule>
    <rule>
        <from>^/API/living/application-page([\?/]|$)</from>
        <to>/APIToolkit/living/application-page$1</to>
    </rule>
    <rule>
        <from>^/API/living/application-menu([\?/]|$)</from>
        <to>/APIToolkit/living/application-menu$1</to>
    </rule>
    <rule>
        <from>^/API/living/application([\?/]|$)</from>
        <to>/APIToolkit/living/application$1</to>
    </rule>
    <rule>
        <from>^/API/customuserinfo/value([\?/]|$)</from>
        <to>/APIToolkit/customuserinfo/value$1</to>
    </rule>
    <rule>
        <from>^/API/identity/group([\?/]|$)</from>
        <to>/APIToolkit/identity/group$1</to>
    </rule>
    <rule>
        <from>^/API/identity/membership([\?/]|$)</from>
        <to>/APIToolkit/identity/membership$1</to>
    </rule>
    <rule>
        <from>^/API/identity/personalcontactdata([\?/]|$)</from>
        <to>/APIToolkit/identity/personalcontactdata$1</to>
    </rule>
    <rule>
        <from>^/API/identity/professionalcontactdata([\?/]|$)</from>
        <to>/APIToolkit/identity/professionalcontactdata$1</to>
    </rule>
    <rule>
        <from>^/API/identity/role([\?/]|$)</from>
        <to>/APIToolkit/identity/role$1</to>
    </rule>
    <rule>
        <from>^/API/identity/user([\?/]|$)</from>
        <to>/APIToolkit/identity/user$1</to>
    </rule>
    <rule>
        <from>^/API/platform/platform([\?/]|$)</from>
        <to>/APIToolkit/platform/platform$1</to>
    </rule>
    <rule>
        <from>^/API/portal/profile([\?/]|$)</from>
        <to>/APIToolkit/portal/profile$1</to>
    </rule>
    <rule>
        <from>^/API/portal/profileEntry([\?/]|$)</from>
        <to>/APIToolkit/portal/profileEntry$1</to>
    </rule>
    <rule>
        <from>^/API/portal/profileMember([\?/]|$)</from>
        <to>/APIToolkit/portal/profileMember$1</to>
    </rule>
    <rule>
        <from>^/API/portal/page([\?/]|$)</from>
        <to>/APIToolkit/portal/page$1</to>
    </rule>
    <rule>
        <from>^/API/portal/bonitaPage([\?/]|$)</from>
        <to>/APIToolkit/portal/bonitaPage$1</to>
    </rule>
    <rule>
        <from>^/API/system/i18nlocale([\?/]|$)</from>
        <to>/APIToolkit/system/i18nlocale$1</to>
    </rule>
    <rule>
        <from>^/API/system/i18ntranslation([\?/]|$)</from>
        <to>/APIToolkit/system/i18ntranslation$1</to>
    </rule>
    <rule>
        <from>^/API/system/session([\?/]|$)</from>
        <to>/APIToolkit/system/session$1</to>
    </rule>
    <rule>
        <from>^/API/system/tenant([\?/]|$)</from>
        <to>/APIToolkit/system/tenant$1</to>
    </rule>
    <rule>
        <from>^/API/tenant/bdm([\?/]|$)</from>
        <to>/APIToolkit/tenant/bdm$1</to>
    </rule>
    <rule>
        <from>^/API/userXP/profile([\?/]|$)</from>
        <to>/APIToolkit/userXP/profile$1</to>
    </rule>
    <rule>
        <from>^/API/userXP/profileEntry([\?/]|$)</from>
        <to>/APIToolkit/userXP/profileEntry$1</to>
    </rule>
    <rule>
        <from>^/API/userXP/profileMember([\?/]|$)</from>
        <to>/APIToolkit/userXP/profileMember$1</to>
    </rule>
    
    
    <rule>
        <from>^/portal/custom-page/(.*)/index$</from>
        <to>/portal/custompage?page=$1&amp;locale=en</to>
    </rule>

    <rule>
        <note>
            Deal with custom page resources URL backward compatibility.
            Also there is a bug with qsappend="true" which always append query string
            using a &amp;.
            Therefor the ?fix=true is used to fix that issue.
        </note>
        <from>^/portal/custom-page/(.*)/pageResource$</from>
        <to qsappend="true" type="redirect">%{context-path}/portal/pageResource?fix=true</to>
    </rule>

    <rule>
        <note>
            Deal with custom page resources URL backward compatibility.
            Also there is a bug with qsappend="true" which always append query string
            using a &amp;.
            Therefor the ?fix=true is used to fix that issue.
        </note>
        <from>^/portal/custom-page/(.*)/themeResource$</from>
        <to qsappend="true" type="redirect">%{context-path}/portal/themeResource?fix=true</to>
    </rule>
    <rule>
        <from>^/portal/custom-page/API/(.*)$</from>
        <to qsappend="true">/API/$1?fix=true</to>
    </rule>
    <rule>
        <from>^/portal/custom-page/([^\/]+)/(.*)</from>
        <to qsappend="true">/portal/pageResource?page=$1&amp;location=$2</to>
    </rule>
    <rule>
        <from>^/portal/custom-page/(.*)$</from>
        <to type="redirect" qsappend="true">%{context-path}/portal/custom-page/$1/index</to>
    </rule>
    
    <!--  Only used in dev mode  -->
    ${proxy-portal-js}
    
</urlrewrite>
